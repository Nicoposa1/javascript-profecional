{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","togglePlay","paused","mute","unmute","AutoPlay","AutoPause","constructor","threshold","handleIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","playButton","onclick","muteButton","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGAA;;AACA;;AACA;AHFA,AEAA,ADAA,MCAMoB,GFAGpB,ACAAmB,MCAT,CAAgB,CDAhB,GDAA,ACAoB,CDAClB,ACAC,MDAtB,EAA6B;AAC3B,AEAAoB,EAAAA,KFAKnB,KAAL,CEAW,EFAED,CEAC,KFAK,CAACE,EAApB;AACA,AEAE,ADDJgB,ODCOf,CCDC,CCCCkB,ADDAhB,KDCP,GAAeL,CEAb,ADDJ,CAAmBa,ECCE,CDDrB,CDCuB,CAACV,CEApB,ADDqB,MDCR,IAAkB,ACDDG,EDChC,ICDuB,EAAiB;AEG1C,ADDI,ADDF,MEEI6B,AFFA,CAAC7B,ECCEgB,ECCE,EFFE,CEECM,AFFAnB,KAAZ,EAAmB,CEEC,CAAC2B,IDDnB,GAA0B,KAAKd,CCCrB,CAAuB,OAAvB,CAAd,QDD8B,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;AFCF,AGCF,ADDI,ADDAjB,IAAAA,EEEEA,CHDCF,EEAEoB,CDDC,CAACf,CEEC,GAAG,CFFX,GDCF,AGCiBV,AFFA,IAAf,QCCA,GAA8B,KCCnB,ADDwByB,CCCR,qBDDG,CAA4BD,IAA5B,CAAiC,IAAjC,CAA9B;AFCH,AGCCrB,ADDC,ADDA,EEEDA,EAAE,EAAEiC,KADyB;AAE7BhC,EAAAA,OAAO,EAAE,CAAC,IAAIe,iBAAJ,EAAD,EAAiB,IAAIC,kBAAJ,EAAjB;AHAXpB,AGF+B,ADE7Bc,ADFAP,CEAa,CAAf,ADEEO,ADFAP,GCEG,CAACA,EDFE,CAACC,EDEE,CAACF,AEAP,CDFH,CCEY,OFAd,CAAsBD,YAAtB,GAAqC,YAAW;AAC9C,AGEF,ADFI,ADFH,CALD,KESMiC,EHFE/B,CEACA,KFAK,CEAV,CCEY,CHFC,CEACA,CCECsB,KDFf,GCEuB,CAACQ,aAAT,CAAuB,aAAvB,CAAnB;AHDI7B,AECA,IFDAA,IAAI,EAAE,AECAkB,MFDM,EECE,GFDGlB,AECA,IFDL,AECSmB,EFFR,kBEEI,CAAyB,KAAKJ,kBAA9B,EAAkD;AFAnEd,AGCJ6B,ADAMhB,IFDFb,EECEa,GFDG,CGCC,CHDC,AGCAiB,IDAI,ADHApB,EDEE,AECA,CCAjB,GAAqB,CHDCV,AECAa,KFDL,AGCUf,EHHV,IGGgB,CAACQ,UAAP,EAA3B;AHAIb,AEDmE,IFCnEA,CEDiB,CAAjB,GFCK,EAAE,KAAKA,KAHC;AGKjB,ADCIwB,IAAAA,ECDEc,MDCM,CAACZ,GCDG,GAAGC,CDCf,CAAiB,KAAKtB,CCDC,CAAC8B,IDCP,CAAYnC,KAA7B,GCDe,CAAuB,aAAvB,CAAnB;AHDI,AEIA2B,IAAAA,IFJInB,IEII,CFJR,AEISoB,GFJG,aEIZ,CAA0B,kBAA1B,EAA8C,KAAKL,sBAAnD;AFHE,AGCNe,ADGG,UCHO,CAACD,EHDE,KAAKrC,AGClB,GAAqB,EHDR,CAAWQ,GGCG,EHDrB;AACD,AGCH,KHPe,CGOXH,MAAM,CAACL,KAAP,CAAaQ,KAAjB,EAAwB;AACtBH,ADGFgB,EAAAA,ECHEhB,MAAM,CAACW,MAAP,GDGgB,CAACa,OAAD,EAAU;AFJ1B,AGED,ADGC,GCLF,KHAMrB,CGEC,CDGCsB,GFLN,CAAUrB,CEKC,GAAGoB,CFLd,EAAiB,IEKI,CAAC,CAAD,CAArB;AFJE,AGEFxB,ADIA,ICJAA,MAAM,ADIA0B,CFNC/B,AGEAe,IAAP,CHFE,CAAWP,EEME,GFNb,AEMgBsB,GFNGrB,EEME,CAACuB,EFNtB,eEMgB,IAA2B,KAAKZ,SAAlD;AFLC,AGEF;AACF,ADIG,CCVJ,ODUQW,SAAJ,EAAe;AFhBF,AEiBX,GFjBJ,QEiBS1B,MAAL,CAAYC,IAAZ;AFLJ,AGEF,ADIK,ICJF,CDEC,EFJGJ,IEMI,GFNT,CAAaQ,OAAb,CAAqBC,AGED4B,MHFO,GGE7B,CHFiC,CGED;AHD5B5B,AGEF4B,ADII,ECJJA,EHFE5B,MAAM,CAACC,AGEA,ADIAP,CCJCmC,EHFR,CAAWnC,EEMT,CAAYE,GFNd,EEME,ECJJ,CAAwBkC,QAAxB,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiDC,KAAK,IAAI;AHDzD,AGECC,ADIC,GFRH,CGIEA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AHDH,AGGE,ADGA,CFtBH,EGgBE;AAID;AHFDhD,AEKEyB,EAAAA,SFLS,CAACnB,SAAZ,CAAsBE,EEKE,EFLxB,CEK0B,EFLG,YAAW;AACtC,AEKE,OFLGN,GEKG+B,EFLR,CAAWzB,IAAX,EEKiB,GAAGqB,QAAQ,CAACM,eAAT,KAA6B,SAA/C;AFJH,CAFD;AEOI,QAAGF,SAAH,EAAa;AFHjBjC,AEIM,WFJK,AEIAO,CFJCD,KEIN,CAAYE,GFJlB,CAAsBC,AEIhB,KFJN,GAA8B,YAAW;AACvC,AEIG,KAFD,EFFGP,IEIE,CFJP,CAAWO,KAAX;AACD,AEIK,CFNN,UEMWF,MAAL,CAAYE,KAAZ;AACD;AFHLT,AEIG,WFJQ,CAACM,SAAZ,CAAsBS,UAAtB,GAAmC,YAAW;AAC5C,MAAI,KAAKb,KAAL,CAAWc,MAAf,EAAuB;AACrB,AEnCY,SFmCPR,IAAL;AACD,GAFD,MAEO;AACL,SAAKC,KAAL,CEIWW;AFHZ;AACF,CAND;;AAQApB,WAAW,CAACM,SAAZ,CAAsBW,IAAtB,GAA6B,YAAW;AACtC,OAAKf,KAAL,CAAWQ,KAAX,GAAmB,IAAnB;AACD,CAFD;;AAIAV,WAAW,CAACM,SAAZ,CAAsBY,MAAtB,GAA+B,YAAW;AACxC,OAAKhB,KAAL,CAAWQ,KAAX,GAAmB,KAAnB;AACD,CAFD;;eAIeV","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["function MediaPlayer(config) {\r\n  this.media = config.el;\r\n  this.plugins = config.plugins || [];\r\n\r\n  this._initPlugins();\r\n}\r\n\r\nMediaPlayer.prototype._initPlugins = function() {\r\n  const player = {\r\n    play: () => this.play(),\r\n    pause: () => this.pause(),\r\n    media: this.media,\r\n    get muted() {\r\n      return this.media.muted;\r\n    },\r\n    set muted(value) {\r\n      this.media.muted = value;\r\n    },\r\n  };\r\n\r\n  this.plugins.forEach(plugin => {\r\n    plugin.run(player);\r\n  });\r\n};\r\n\r\nMediaPlayer.prototype.play = function() {\r\n  this.media.play();\r\n};\r\n\r\nMediaPlayer.prototype.pause = function() {\r\n  this.media.pause();\r\n};\r\n\r\nMediaPlayer.prototype.togglePlay = function() {\r\n  if (this.media.paused) {\r\n    this.play();\r\n  } else {\r\n    this.pause();\r\n  }\r\n};\r\n\r\nMediaPlayer.prototype.mute = function() {\r\n  this.media.muted = true;\r\n};\r\n\r\nMediaPlayer.prototype.unmute = function() {\r\n  this.media.muted = false;\r\n};\r\n\r\nexport default MediaPlayer;\r\n","function AutoPlay() {}\r\nAutoPlay.prototype.run = function(player) {\r\n  if (!player.muted) {\r\n    player.muted = true;\r\n  }\r\n  player.play();\r\n};\r\n\r\nexport default AutoPlay;\r\n","class AutoPause {\r\n  constructor() {\r\n    this.threshold = 0.25;\r\n    this.handleIntersection = this.handleIntersection.bind(this);\r\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\r\n  }\r\n\r\n  run(player) {\r\n    this.player = player;\r\n\r\n    const observer = new IntersectionObserver(this.handleIntersection, {\r\n      threshold: this.threshold,\r\n    });\r\n\r\n    observer.observe(this.player.media);\r\n\r\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange)\r\n  }\r\n\r\n  handleIntersection(entries) {\r\n    const entry = entries[0];\r\n\r\n    const isVisible = entry.intersectionRatio >= this.threshold;\r\n\r\n    if (isVisible) {\r\n      this.player.play();\r\n    } else {\r\n      this.player.pause();\r\n    }\r\n  }\r\n  handleVisibilityChange(){\r\n    const isVisible = document.visibilityState === \"visible\"\r\n    if(isVisible){\r\n      this.player.play()\r\n    }else{\r\n      this.player.pause()\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport default AutoPause;\r\n\r\n","import MediaPlayer from './MediaPlayer.js';\r\nimport AutoPlay from './plugins/AutoPlay.js';\r\nimport AutoPause from './plugins/AutoPause.js';\r\n\r\nconst video = document.querySelector('video');\r\nconst player = new MediaPlayer({\r\n  el: video,\r\n  plugins: [new AutoPlay(), new AutoPause()],\r\n});\r\n\r\nconst playButton = document.querySelector('#playButton');\r\nplayButton.onclick = () => player.togglePlay();\r\n\r\nconst muteButton = document.querySelector('#muteButton');\r\nmuteButton.onclick = () => {\r\n  if (player.media.muted) {\r\n    player.unmute();\r\n  } else {\r\n    player.mute();\r\n  }\r\n};\r\n\r\nif('serviceWorker' in navigator){\r\n  navigator.serviceWorker.register('/sw.js').catch(error => {\r\n    console.log(error.message);\r\n    \r\n  })\r\n}"]}